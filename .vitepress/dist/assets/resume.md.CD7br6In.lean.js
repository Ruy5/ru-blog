import{_ as x,j as _,ak as L,h as R,k as S,z as E,o as m,c as g,l as f,F as D,E as C,P as V,r as W,I as P,w as $,a4 as q}from"./chunks/framework.eSehZVqP.js";const z={class:"fs-waterfall-container"},B={class:"fs-waterfall-list"},j=Object.assign({name:"FsWaterFall"},{__name:"waterfall",props:["gap","column","request","page-size"],setup(d){const t=d,u=l=>{let r=!1;return function(...a){r||(r=!0,window.requestAnimationFrame(()=>{l.apply(this,a),r=!1}))}},h=(l,r=300)=>{let a=null;return function(...i){a&&clearTimeout(a),a=setTimeout(()=>{l.apply(this,i)},r)}},n=_(),s=_([]),o=_([]),e=L({loading:!1,isfinish:!1,page:1,imageWidth:0,imageList:[]}),c=R(()=>{let l=-1,r=1/0;for(let a=0;a<s.value.length;a++){const i=s.value[a];i<r&&(l=a,r=i)}return{minIndex:l,minHeight:r}}),v=async(l,r,a)=>{if(e.isfinish)return;e.loading=!0;const i=await t.request(l,r);if(e.page++,!i.length){e.isfinish=!0;return}b(i,a),e.imageList=[...e.imageList,...i],e.loading=!1},b=(l,r)=>{l.forEach((a,i)=>{const k=Math.floor(a.height*e.imageWidth/a.width);if(r&&i<t.column)o.value.push({x:i%t.column!==0?i*e.imageWidth+t.gap*i:i*e.imageWidth,y:0}),s.value.push(k+t.gap);else{const{minIndex:p,minHeight:T}=c.value;o.value.push({x:p%t.column!==0?p*e.imageWidth+t.gap*p:p*e.imageWidth,y:T}),s.value[p]+=k+t.gap}})},w=u(()=>{const{scrollTop:l,clientHeight:r,scrollHeight:a}=n.value;a-r-l<=100&&!e.loading&&v(e.page,t.pageSize,!1)}),y=h(()=>{n.value&&(e.imageWidth=(n.value.clientWidth-(t.column-1)*t.gap)/t.column,o.value=[],s.value=[],b(e.imageList,!0))},300),I=()=>{n.value&&(e.imageWidth=(n.value.clientWidth-(t.column-1)*t.gap)/t.column,v(e.page,t.pageSize,!0),n.value.addEventListener("scroll",w),window.addEventListener("resize",y))};return S(()=>{I()}),E(()=>{n.value&&n.value.removeEventListener("scroll",w),window.removeEventListener("resize",y)}),(l,r)=>(m(),g("div",z,[f("div",{class:"fs-waterfall-content",ref_key:"contentRef",ref:n},[f("div",B,[(m(!0),g(D,null,C(e.imageList,(a,i)=>(m(),g("div",{class:"fs-waterfall-item",key:a.id,style:V({width:`${e.imageWidth}px`,transform:`translate3d(${o.value[i].x}px, ${o.value[i].y}px, 0)`})},[W(l.$slots,"item",{item:a},void 0,!0)],4))),128))])],512)]))}}),A=x(j,[["__scopeId","data-v-8c670c1d"]]),F={class:"waterfall-container"},H=["src"],N={__name:"resumePr",setup(d){const t=(u,h)=>new Promise(n=>{fetch(`https://www.vilipix.com/api/v1/picture/public?limit=${h}&sort=hot&offset=${--u*h}`).then(async s=>{const e=(await s.json()).data.rows.map(c=>({id:c.picture_id,url:c.original_url,height:c.height,width:c.width}));n(e)})});return(u,h)=>(m(),g("div",F,[P(A,{gap:20,column:6,request:t,"page-size":30},{item:$(({item:n})=>[f("img",{src:n.url,alt:"图片",class:"image",lazy:""},null,8,H)]),_:1})]))}},M=x(N,[["__scopeId","data-v-8d67224d"]]),X=q("",5),J=q("",20),Q=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"resume.md","filePath":"resume.md"}'),O={name:"resume.md"},G=Object.assign(O,{setup(d){return(t,u)=>(m(),g("div",null,[X,P(M),J]))}});export{Q as __pageData,G as default};
